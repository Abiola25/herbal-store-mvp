<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Your Cart - MILNAPATH HERBAL PRODUCTS STORE</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
  font-family:Inter,Arial,sans-serif;
  padding:20px;
  background:#f0f7f1;
  color:#17351c;
}
h2 {
  text-align:center;
  color:#2e7d32;
  font-family:Marcellus,serif;
  margin-bottom:8px;
  animation:fadeInUp 1s ease forwards;
}
.sub {
  font-size:14px;
  text-align:center;
  color:#4b7053;
  margin-bottom:18px;
}
.item {
  background:#fff;
  padding:15px;
  margin-bottom:10px;
  border-radius:10px;
  box-shadow:0 8px 22px rgba(27,94,32,0.08);
  border:1px solid #c8e6c9;
  transition:transform .3s ease;
}
.item:hover {transform:translateY(-3px)}
.item strong {color:#1b5e20}
button {
  padding:12px;
  width:100%;
  background:linear-gradient(90deg,#2e7d32,#1b5e20);
  color:white;
  border:none;
  border-radius:10px;
  cursor:pointer;
  margin-top:8px;
  transition:.3s;
  font-weight:700;
  box-shadow:0 6px 18px rgba(27,94,32,0.15);
  display:flex;align-items:center;justify-content:center;
}
button span {margin-left:6px;}
button:hover {transform:translateY(-2px) scale(1.03);box-shadow:0 8px 20px rgba(27,94,32,0.25)}
input, select {
  padding:10px;
  width:100%;
  border-radius:10px;
  border:1px solid #c8e6c9;
  background:#fcfffd;
  margin-top:6px;
  margin-bottom:12px;
}
#order-section {
  background:#ffffff;
  padding:16px;
  border-radius:12px;
  margin-top:20px;
  border:1px solid #c8e6c9;
  box-shadow:0 8px 22px rgba(27,94,32,0.08);
}
a.back-btn {
  display:inline-block;
  margin-bottom:16px;
  color:#1b5e20;
  text-decoration:none;
  font-weight:bold;
}
.notice {
  color:#b71c1c;
  font-size:13px;
  margin-top:8px;
}
footer {
  text-align:center;
  background:#2e7d32;
  color:#fff;
  padding:24px;
  border-radius:12px;
  margin-top:34px;
}
footer a {color:#fff;text-decoration:none;font-weight:bold}
.whatsapp-float {
  position:fixed;
  bottom:80px;
  right:20px;
  background:#25D366;
  color:#fff;
  padding:12px 18px;
  border-radius:30px;
  font-weight:bold;
  box-shadow:0 0 15px rgba(0,0,0,0.3);
  transition:transform .3s ease;
  z-index:999;
  animation:pulse 2.5s infinite;
}
.whatsapp-float:hover {transform:scale(1.05)}
@keyframes pulse {
  0%{transform:scale(1)}
  50%{transform:scale(1.05)}
  100%{transform:scale(1)}
}
@keyframes fadeInUp {from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>

<h2>Your Cart</h2>
<p class="sub">Premium wellness, handled with care.</p>
<a href="index.html" class="back-btn">â¬… Back to Store</a>
<div id="cart-items"></div>

<div id="order-section">
  <label>Customer Name:<br>
    <input type="text" id="customerName" placeholder="Enter your name">
  </label>

  <label>Delivery Method:<br>
    <select id="shipment">
      <option value="">-- Select --</option>
      <option value="Pickup">Pickup</option>
      <option value="Delivery">Delivery</option>
      <option value="Courier">Courier</option>
    </select>
  </label>

  <label>Upload Proof of Payment (optional):<br>
    <input type="file" id="payment-proof" accept="image/*">
  </label>

  <p class="notice">ðŸšš Note: Delivery charges may apply depending on your location.</p>

  <button onclick="orderWhatsApp()">ðŸ›’ <span>Order via WhatsApp</span></button>
  <button onclick="clearCart()" style="background:#b71c1c;">ðŸ—‘ <span>Clear Cart</span></button>

  <div style="margin-top:14px;font-size:13px;color:#4b7053;line-height:1.6">
    <strong>Payment details:</strong><br>
    Account Name: Jumai Abdul-Sule<br>
    Account Number: 8242971170<br>
    Bank Name: Moniepoint<br>
    Account Name: Jumai Abdul-Sule<br>
    Account Number: 0021303424 <br>
    Bank Name: Sterling Bank
  </div>
</div>

<footer>
  <p>
    Jumai Abdul-Sule â€” 8242971170 â€” Moniepoint<br>
    Jumai Abdul-Sule â€” 0021303424 â€” Sterling Bank<br>
    <strong>Location:</strong> 21 C Crescent off B Avenue, Citec Estate, Airport Road, Jabi, Abuja FCT<br>
    <strong>Contact:</strong> WhatsApp +2347039249771 | Email: jumaiabdulsule@gmail.com

<a href="https://wa.me/2347039249771" class="whatsapp-float" target="_blank">ðŸ’¬ Chat on WhatsApp</a>

<script>
const STORE={whatsapp:"2347039249771",name:"MILNAPATH HERBAL PRODUCTS STORE",address:"21 C Crescent off B Avenue, Citec Estate, Airport Road, Jabi, Abuja FCT"};
let cart=JSON.parse(localStorage.getItem("cart")||"[]");
const container=document.getElementById("cart-items");
let productsList=[];

async function loadCart(){
  const res=await fetch('products.json');
  productsList=await res.json();
  // filter out invalid items
  cart=cart.filter(item=>productsList.some(p=>p.id===item.id));
  container.innerHTML="";
  if(cart.length===0){
    container.innerHTML="<p style='text-align:center;color:#4b7053;'>ðŸ›’ Your cart is empty.</p>";
    return;
  }
  cart.forEach(item=>{
    const product=productsList.find(p=>p.id===item.id);
    if(!product) return;
    const subtotal=product.price*item.qty;
    container.innerHTML+=`
      <div class="item">
        <strong>${product.name}</strong><br>
        â‚¦${product.price.toLocaleString()} Ã— ${item.qty} = â‚¦${subtotal.toLocaleString()}
        <br><button onclick="removeItem(${item.id})">ðŸ—‘ <span>Remove</span></button>
      </div>`;
  });
}

function removeItem(id){
  cart=cart.filter(item=>item.id!==id);
  localStorage.setItem("cart",JSON.stringify(cart));
  loadCart();
}
function clearCart(){
  localStorage.removeItem("cart");
  cart=[];
  loadCart();
}

function orderWhatsApp(){
  if(cart.length===0){alert("Your cart is empty.");return;}
  const shipment=document.getElementById("shipment").value;
  if(!shipment){alert("Please select a delivery method.");return;}
  const fileInput=document.getElementById("payment-proof");
  const name=(document.getElementById("customerName").value||"").trim();

  // Header
  let header = `ðŸŒ¿ *${STORE.name}*\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
  header += `ðŸ“… Date: ${new Date().toLocaleDateString()}\n`;
  if(name)   header += `ðŸ“… Date: ${new Date().toLocaleDateString()}\n`;
  if(name) header += `ðŸ‘¤ Customer: ${name}\n`;
  header += `ðŸšš Delivery Method: ${shipment}\n\n`;

  // Items
  let lines = "ðŸ§¾ *Order Summary*\n";
  let total = 0;
  cart.forEach((item,i)=>{
    const product = productsList.find(p=>p.id===item.id);
    if(product){
      const sub = product.price * item.qty;
      total += sub;
      lines += `${i+1}) ${product.name} â€” ${item.qty} Ã— â‚¦${product.price.toLocaleString()} = â‚¦${sub.toLocaleString()}\n`;
    }
  });

  // Footer + payment + delivery note
  let footer = `\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸ’° *Total:* â‚¦${total.toLocaleString()}\n`;
  footer += `ðŸšš *Delivery Charges:* May apply depending on location\n\n`;
  footer += `ðŸ¦ *Payment Details*\n`;
  footer += `Account Name: Jumai Abdul-Sule\n`;
  footer += `Account Number: 8242971170\n`;
  footer += `Bank Name: Moniepoint\n\n`;
  footer += `ðŸ  Pickup/Delivery Address:\n${STORE.address}\n\n`;
  footer += `âœ¨ Thank you for choosing *luxury wellness* with us!`;

  const proofNote = fileInput.files.length>0 ? "\nðŸ“Ž Proof of Payment: Uploaded" : "";
  const url=`https://wa.me/${STORE.whatsapp}?text=${encodeURIComponent(header+lines+footer+proofNote)}`;
  window.open(url,"_blank");

  // Persist order for admin
  const orders=JSON.parse(localStorage.getItem("orders")||"[]");
  orders.push({
    items:cart,
    shipment:shipment || "Not selected",
    proofUploaded:fileInput.files.length>0,
    customer:name || "",
    date:new Date().toLocaleString()
  });
  localStorage.setItem("orders",JSON.stringify(orders));

  alert("Order sent via WhatsApp and saved for admin review.");
  clearCart();
}

loadCart();
</script>

</body>
</html>
